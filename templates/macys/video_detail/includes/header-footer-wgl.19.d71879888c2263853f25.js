header_footer_wgl_jsonp([19,20],{638:function(module,exports,__webpack_require__){var $=__webpack_require__(5),_=__webpack_require__(7),RedirectUtil=__webpack_require__(640),Segmentation=__webpack_require__(190),Security=__webpack_require__(481),TextBoxClearable=__webpack_require__(646),TextBoxAnimatePlaceholder=__webpack_require__(647),AnalyticsQueryString=__webpack_require__(194),SearchKeywordEncode=__webpack_require__(512),LastSearches=__webpack_require__(513),HeaderCMStorage=__webpack_require__(648);module.exports={init:function(searchMetaObj,properties,isRegistry){var searchMeta=searchMetaObj,baseHostUrl=$("header").data("hostlink")||"",parts=searchMeta.pathName?searchMeta.pathName.split("/"):null,GlobalSearch={},urlParamObj=AnalyticsQueryString.buildQueryMap(),cmSp=urlParamObj.cm_sp,kws=urlParamObj.kws,ss=urlParamObj.ss,url=window.location.href;if(_.isUndefined(window.headerSSParam)||(urlParamObj.ss=window.headerSSParam,ss=window.headerSSParam),GlobalSearch.box=$("#globalSearchInputField"),GlobalSearch.container=$("#autosuggest"),GlobalSearch.searchSubmit=$("#searchSubmit"),void 0!==properties.lastSearchesEnabled&&!0===properties.lastSearchesEnabled&&(GlobalSearch.display=function(markup,eventBindings){GlobalSearch.container=$("#autosuggest"),GlobalSearch.container.html(markup),!properties.viewType||"default"!==properties.viewType.toLowerCase()&&"adaptive"!==properties.viewType.toLowerCase()&&"clean"!==properties.viewType.toLowerCase()&&"radical"!==properties.viewType.toLowerCase()||!0!==properties.mashupServiceProductRecommendationsEnabled||GlobalSearch.container.css("width",GlobalSearch.box.outerWidth()+GlobalSearch.searchSubmit.outerWidth()+"px"),GlobalSearch.container.show(),eventBindings()},LastSearches.init(GlobalSearch,properties)),void 0!==properties.inbentaSearchEnabled&&"true"===String(properties.inbentaSearchEnabled)&&Segmentation.detect([2197],function(segmentVal){2197===segmentVal&&TextBoxAnimatePlaceholder.animatePlaceholder("#globalSearchInputField",{defaultText:"What are you looking for?",phrases:["Iâ€™m looking for a belt to match my winter boots","Show me top-rated high tech watches under $200","Do you have any formal dresses on sale?","Really soft sweatpants?"]})}),cmSp&&kws){var kwsTerm=decodeURIComponent(kws);$("#globalSearchInputField").val(kwsTerm)}else null!=parts&&parts.length>3&&"shop"===parts[1]&&"featured"===parts[2]&&"true"===ss&&!searchMeta.isDLP?(searchMeta.searchInput=parts[3],GlobalSearch.box.val(decodeURIComponent(SearchKeywordEncode.removeSpecialChars(searchMeta.searchInput).replace(/-/g," ").replace(/~~/g,"-")))):void 0!==searchMeta.searchKeyword&&searchMeta.searchKeyword.length&&-1===url.indexOf("/shop/featured/")&&(searchMeta.searchKeyword=decodeURIComponent(searchMeta.searchKeyword.replace(/~~/g,"-")),$("#globalSearchInputField").val(searchMeta.searchKeyword.toLowerCase()));isRegistry||TextBoxClearable.makeClearable("globalSearchInputField",function(){GlobalSearch.box.keyup()}),$("form[name='keywordSearch']").submit(function(e){if(HeaderCMStorage.init(),!isRegistry){var searchInput=GlobalSearch.box.val();if(searchInput=Security.preventXss(searchInput),Security.attemptedScript(searchInput))$("#globalSearchInputField").val("");else if(searchMeta.searchInput=searchInput,SearchKeywordEncode.checkForRestfulPatternRedirection(searchMeta)){var searchPhrase=SearchKeywordEncode.encodeSearchPhrase(searchMeta);if(e.preventDefault(),searchPhrase.trim().length>0){var autoCompleteKeyword=$("#autoCompleteText").val(),lastSearchesText=$("#lastSearchesText").val(),searchUrl=baseHostUrl+searchMeta.baseSearchUrl+"/"+searchPhrase+"?ss=true";-1!==searchMeta.baseSearchUrl.indexOf("keyword")&&(searchUrl=baseHostUrl+searchMeta.baseSearchUrl+searchPhrase),searchMeta.nlsQueryParam&&void 0!==searchMeta.nlsQueryParam&&""!==searchMeta.nlsQueryParam&&(searchUrl+="&ce="+searchMeta.nlsQueryParam),autoCompleteKeyword&&(searchUrl+="&cm_kws_ac="+autoCompleteKeyword),lastSearchesText&&(searchUrl+="&cm_kws_ls="+lastSearchesText),RedirectUtil.toHref(searchUrl)}}}})}}},640:function(module,exports){module.exports={toLocation:function(newLocation){window.location=newLocation},toHref:function(newHref){window.location.href=newHref},getPathName:function(){return window.location.pathname}}},646:function(module,exports,__webpack_require__){var $=__webpack_require__(5),$this=void 0;module.exports={makeClearable:function(elementId,callback){var containerId="clearable_"+($this=$("#"+elementId)).attr("id"),shown=void 0!==$this.val()&&$this.val().length>0?"":"display:none;";$this.css({"padding-right":"22px",display:"inline-block"}).wrap('<div id="'+containerId+'" style="position:relative;"></div>').after('<div class="clearlink icon-ui-close-gr-small" style="'+shown+' ">&nbsp;</div>').on("keyup",function(){var o=$("#"+containerId+" > .clearlink");""===$(this).val()?o.fadeOut():o.fadeIn().css("display","inline-block")}).parent().css("white-space","nowrap"),$(".clearlink").attr("title","Click to clear this textbox").on("click",function(){$($(this).parent().children()[0]).val("").focus(),$(this).hide(),$.isFunction(callback)&&callback()})},unbindClearable:function(elementId,eventType){return $this=$("#"+elementId),eventType?$this.unbind(eventType):$this.unbind(),$this}}},647:function(module,exports,__webpack_require__){var $=__webpack_require__(5),_=__webpack_require__(7),defaults={defaultText:"What are you looking for?",phrases:["Message 1","Message 2","Message 3"],startDelay:2e3,typeSpeed:50,pauseDelay:30};module.exports={animatePlaceholder:function(elementSelector,opts){var options=opts,input=$(elementSelector),cmds=[];function clear(){input.attr("placeholder","")}function doLoop(){function pushLetterToArray(letter){var a;cmds.push((a=letter,function(){input.attr("placeholder",input.attr("placeholder")+a)}))}cmds=[];for(var i=0;i<options.phrases.length;i++){cmds.push(clear),options.phrases[i].split("").forEach(pushLetterToArray);for(var nn=0;nn<options.pauseDelay;nn++)cmds.push(0)}cmds.push(doLoop)}void 0===options&&(options={}),_.defaults(options,defaults),input.attr("placeholder",options.defaultText);setTimeout(function(){doLoop();var cyclePlaceholder=setInterval(function(){var cmd=cmds.shift();cmd&&cmd()},options.typeSpeed);input.focus(function(){clearInterval(cyclePlaceholder),cmds=[],input.attr("placeholder",options.defaultText)})},options.startDelay)}}},648:function(module,exports,__webpack_require__){var $=__webpack_require__(5),headerCMStorage={primaryKey:"CM_KWS",storage:window.sessionStorage,getCacheMap:function(){var cacheValue="",cacheMap={};return this.storage&&(cacheValue=this.storage.getItem(this.primaryKey)),cacheValue&&(cacheMap=this._parseParamString(cacheValue)),cacheMap},_parseParamString:function(paramString){var i=void 0,qs=void 0;if(0===(qs=String(paramString)).length)return{};qs="#"===qs.charAt(0)||"?"===qs.charAt(0)?qs.substr(1,qs.length).split("&"):qs.split("&");var qsDict={},qsElem={};for(i=0;i<qs.length;i++)(qsElem=qs[i].split("="))[0]=qsElem[0].toUpperCase(),qsDict[qsElem[0]]?"string"==typeof qsDict[qsElem[0]]?qsDict[qsElem[0]]=[qsDict[qsElem[0]],qsElem[1]]:qsDict[qsElem[0]]=qsDict[qsElem[0]].concat(qsElem[1]):qsDict[qsElem[0]]=qsElem[1];return qsDict},updateCache:function(paramMap){this.storage.setItem(this.primaryKey,paramMap.join("&"))},init:function(){var searchTerm=$("form[name='keywordSearch']").find(".globalSearchInputField").val(),requestTerm=$("#autoCompleteText").val();this.clearFromCache(),searchTerm&&(this.storeInCache("cm_kws",escape(searchTerm)),requestTerm&&this.storeInCache("cm_kws_ac",escape(requestTerm)))},storeInCache:function(key,value){var cacheMap=this.getCacheMap(),paramMap=[];for(var keyItem in key&&(cacheMap[key.toUpperCase()]=value),cacheMap)cacheMap[keyItem]&&paramMap.push(keyItem.toLowerCase()+"="+cacheMap[keyItem]);this.updateCache(paramMap)},clearFromCache:function(){this.storage&&this.storage.removeItem(this.primaryKey)}};module.exports=headerCMStorage}});
//# sourceMappingURL=header-footer-wgl.19.d71879888c2263853f25.js.map